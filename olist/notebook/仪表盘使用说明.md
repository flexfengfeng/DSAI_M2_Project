# 巴西各地区平均送货时间分析仪表盘

## 📋 概述

这是一个集成的Web仪表盘，将原本分散的Jupyter notebook输出整合到一个统一的网页界面中，提供直观的数据可视化和交互功能。

## 🎯 主要改进

### 1. 统一布局设计
- **左侧面板**: 筛选器和数据摘要
- **右侧上方**: 交互式地图
- **右侧下方**: 三个并排的分析图表

### 2. 优化的用户体验
- 响应式设计，适配不同屏幕尺寸
- 现代化的UI设计和动画效果
- 直观的交互控件和反馈

### 3. 增强的功能
- 实时数据筛选和更新
- 全选/取消全选快捷操作
- 滑块控制最小订单数
- 悬停提示显示详细信息

## 🚀 快速启动

### 方法一：使用启动脚本（推荐）
```bash
cd /Users/fengfeng/Dev/5m-data-2.5-data-warehouse/olist/notebook
python start_dashboard.py
```

### 方法二：手动启动
```bash
cd /Users/fengfeng/Dev/5m-data-2.5-data-warehouse/olist/notebook
python -m http.server 8000
# 然后在浏览器中访问: http://localhost:8000/integrated_delivery_dashboard.html
```

## 📊 仪表盘组件说明

### 左侧筛选面板

#### 1. 数据摘要卡片
- **覆盖地区**: 当前筛选条件下的地区总数
- **覆盖州**: 涉及的州数量
- **平均送货天数**: 所有地区的平均值
- **总订单数**: 订单总量

#### 2. 州选择器
- 多选复选框，可选择要显示的州
- 支持全选/取消全选操作
- 实时更新地图和图表

#### 3. 送货时间分类筛选
- 按送货速度分类筛选：快速、中等、慢速、很慢
- 支持多选和全选操作

#### 4. 最小订单数滑块
- 拖动滑块设置最小订单数阈值
- 过滤掉订单量较少的地区

### 右侧内容区域

#### 1. 交互式地图 🗺️
- **圆点大小**: 表示平均送货时间（越大越慢）
- **颜色渐变**: 绿色（快）→ 红色（慢）
- **交互功能**: 缩放、拖拽、悬停查看详情
- **地理覆盖**: 整个巴西地区

#### 2. 各州平均送货天数柱状图 📊
- 横轴：各州代码
- 纵轴：平均送货天数
- 颜色：根据送货时间着色
- 显示具体数值

#### 3. 送货时间分类饼图 🥧
- 环形饼图显示各分类占比
- 颜色编码：绿色（快速）到红色（很慢）
- 显示百分比和标签

#### 4. 送货天数分布直方图 📈
- 显示送货天数的频次分布
- 帮助识别数据的分布模式
- X轴：送货天数，Y轴：频次

## 🎨 设计特色

### 视觉设计
- **配色方案**: 蓝色主题，专业且现代
- **渐变效果**: 头部和按钮使用渐变背景
- **阴影效果**: 卡片和面板具有立体感
- **动画交互**: 悬停和点击有平滑过渡

### 响应式布局
- **桌面端**: 左右分栏布局
- **平板端**: 自适应调整
- **手机端**: 垂直堆叠布局

## 📱 使用技巧

### 1. 数据筛选
- 先选择感兴趣的州
- 再选择送货时间分类
- 最后调整最小订单数阈值

### 2. 地图操作
- 滚轮缩放查看细节
- 拖拽移动视角
- 点击圆点查看详细信息

### 3. 图表交互
- 悬停查看具体数值
- 图表会根据筛选条件实时更新

### 4. 数据刷新
- 点击"刷新数据"按钮获取最新数据
- 系统会显示加载状态

## 🔧 技术架构

### 前端技术
- **HTML5**: 语义化结构
- **CSS3**: 现代样式和动画
- **JavaScript ES6+**: 交互逻辑
- **Plotly.js**: 图表渲染

### 数据处理
- **Python**: 后端数据处理
- **BigQuery**: 数据源
- **JSON**: 数据交换格式

### 部署方式
- **静态文件**: 纯前端实现
- **HTTP服务器**: Python内置服务器
- **本地部署**: 无需外部依赖

## 📁 文件结构

```
notebook/
├── integrated_delivery_dashboard.html    # 主仪表盘文件
├── dashboard_data_generator.py          # 数据生成器
├── start_dashboard.py                   # 启动脚本
├── dashboard_data.json                  # 数据文件
├── 仪表盘使用说明.md                     # 本文档
└── geo_delivery_dashboard2.ipynb       # 原始notebook
```

## 🐛 故障排除

### 常见问题

1. **端口被占用**
   - 修改启动脚本中的端口号
   - 或终止占用端口的进程

2. **数据加载失败**
   - 检查dashboard_data.json文件是否存在
   - 运行数据生成器重新创建数据

3. **图表不显示**
   - 检查网络连接（需要加载Plotly.js）
   - 确认浏览器支持现代JavaScript

4. **BigQuery连接问题**
   - 检查Google Cloud认证
   - 系统会自动使用示例数据作为备选

### 浏览器兼容性
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

## 🔄 更新和维护

### 数据更新
```bash
python dashboard_data_generator.py
```

### 自定义配置
- 修改数据生成器的查询语句
- 调整HTML中的样式和布局
- 更改图表的配色方案

## 📞 支持

如有问题或建议，请：
1. 检查本文档的故障排除部分
2. 查看浏览器控制台的错误信息
3. 联系开发团队

---

**版本**: 1.0.0  
**最后更新**: 2024年12月  
**兼容性**: 现代浏览器